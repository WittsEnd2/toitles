$(function() {
  $( "#register" ).click(function () {
    var first_name = $('#first_name').val();
    var last_name = $('#last_name').val();
    var email = $('#email').val();
    var pass = $('#password').val();
    var pass2 = $('#password_confirmation').val();
    var ref = new Firebase("https://toitle.firebaseio.com");
    if(pass == pass2){
      ref.createUser({
        name: first_name,
        last_name: last_name,
        email: email,
        password: pass
      }, function(error, userData) {
        if (error) {
          switch (error.code) {
            case "EMAIL_TAKEN":
            console.log("The new user account cannot be created because the email is already in use.");
            break;
            case "INVALID_EMAIL":
            console.log("The specified email is not a valid email.");
            break;
            default:
            console.log("Error creating user:", error);
          }
        } else {
          alert("Account successfully created!");
          ref.child('users').child(userData.uid).set({ 
            first_name: first_name,
            last_name: last_name, 
            uid: userData.uid, 
            email: email
          });
          window.location = "index.html";
        }
      });
      
    } else {
      console.log("Registration error: password mismatch.");
    }
  });
});