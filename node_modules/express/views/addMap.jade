doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    // The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags
    meta(name='description', content='')
    meta(name='author', content='')
    link(rel='icon', href='../../favicon.ico')
    title Toitle - addEvent
    // Latest compiled and minified CSS
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css', integrity='sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7', crossorigin='anonymous')
    // Optional theme
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css', integrity='sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r', crossorigin='anonymous')
    // Latest compiled and minified JavaScript
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js', integrity='sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS', crossorigin='anonymous')
    // Bootstrap core CSS
    link(href='../../dist/css/bootstrap.min.css', rel='stylesheet')
    // IE10 viewport hack for Surface/desktop Windows 8 bug
    link(href='../../assets/css/ie10-viewport-bug-workaround.css', rel='stylesheet')
    // Custom styles for this template
    link(href='css/starter-template.css', rel='stylesheet')
    // Just for debugging purposes. Don't actually copy these 2 lines!
    //if lt IE 9
      script(src='../../assets/js/ie8-responsive-file-warning.js')
    script(src='../../assets/js/ie-emulation-modes-warning.js')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js')
    script.
      window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\\/script>')
    // Bootstrap FileStyle
    script(src='filestyle.js')
    // HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
    script(src='https://cdn.firebase.com/js/client/2.2.1/firebase.js')
    // Google Maps
    script(src='https://maps.googleapis.com/maps/api/js')
    script.
      //sript to check if user is logged in
      var ref = new Firebase("https://toitle.firebaseio.com");
      var authData = ref.getAuth();
      if (authData) {
      console.log("User " + authData.uid + " is logged in with " + authData.provider);
      } else {
      alert("You need to be logged in to access this page.");
      window.location = "/";
      }
      // Pat's code
      var lat = 38.987103;
      var lon = -76.942542;
      var latLng
      if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition( function(location){
      lat = location.coords.latitude;
      lon = location.coords.longitude;
      });
      }else{
      lat = 38.987103;
      lon = -76.942542;
      }
      var myCenter=new google.maps.LatLng(lat,lon);
      var marker
      function initialize()
      {
      var mapProp = {
      center:myCenter,
      zoom:15,
      mapTypeId:google.maps.MapTypeId.ROADMAP
      };
      var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
      marker=new google.maps.Marker({
      position:myCenter,
      draggable:true,
      title:"Drag me!"
      });
      marker.setMap(map);
      google.maps.event.addListener(marker, 'dragend', function(marker){
      latLng = marker.latLng;
      $latitude.value = latLng.lat();
      $longitude.value = latLng.lng();
      });
      }
      google.maps.event.addDomListener(window, 'load', initialize);
      $(function() {
      $( "#newEvent" ).click(function () {
      window.location = "addEventMap?location="+latLng;
      });
      });
  body
    // Latest compiled and minified JavaScript
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js', integrity='sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS', crossorigin='anonymous')
    nav.navbar.navbar-inverse.navbar-fixed-top
      .container
        .navbar-header
          button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar', aria-expanded='false', aria-controls='navbar')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') toitle
        #navbar.collapse.navbar-collapse
          ul.nav.navbar-nav
            li
              a(href='/') Logout
            li.active
              a(href='addMap') Add Event
            li
              a(href='findEvents') Find Event
            li
              a(href='dashboard') Dashboard
        // /.nav-collapse
    br
    br
    #container.container(align='center', name='container')
      #googleMap(style='width:500px;height:380px;')
    .container
      br
      br
      .row.centered-form
        .col-xs-12.col-sm-8.col-md-4.col-sm-offset-2.col-md-offset-4
          .panel-body
            form#newEvent(role='form', name='newEvent')
              input#add.btn.btn-info.btn-block(type='button', value='Add')
    //
      Bootstrap core JavaScript
      ==================================================
    // Placed at the end of the document so the pages load faster
    script(src='../../dist/js/bootstrap.min.js')
    // IE10 viewport hack for Surface/desktop Windows 8 bug
    script(src='../../assets/js/ie10-viewport-bug-workaround.js')
